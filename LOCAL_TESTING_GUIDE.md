#!/bin/bash

# LearnMind Phase 1 - Local Testing Guide
# Este script contiene los pasos para testear la aplicaci√≥n completa localmente

echo "========================================="
echo "LearnMind Phase 1 - Testing Local Setup"
echo "========================================="
echo ""

# Paso 1: Iniciar servicios Docker
echo "üì¶ Paso 1: Iniciando servicios Docker..."
echo "  - PostgreSQL 16"
echo "  - Redis 7"
echo "  - MinIO 7.x"
echo ""
echo "  Comando: docker-compose up -d"
echo "  Espera 10 segundos para que est√©n listos..."
echo ""

# Paso 2: Backend
echo "üîß Paso 2: Iniciar Backend (Terminal 1)"
echo "  Comando: cd backend && npm run start:dev"
echo "  Esperado: Backend corriendo en http://localhost:3001"
echo "  Swagger UI: http://localhost:3001/api/docs"
echo ""

# Paso 3: Frontend
echo "‚öõÔ∏è  Paso 3: Iniciar Frontend (Terminal 2)"
echo "  Comando: cd frontend && npm run dev"
echo "  Esperado: Frontend corriendo en http://localhost:5173"
echo ""

# Plan de Testing
echo "========================================="
echo "üìã PLAN DE TESTING EN BLOQUES"
echo "========================================="
echo ""

echo "üß™ BLOQUE 1: AUTENTICACI√ìN"
echo "  1. Ir a http://localhost:5173"
echo "  2. Click en 'Registrarse gratis'"
echo "  3. Llenar formulario:"
echo "     - Nombre: Test User"
echo "     - Email: test@example.com"
echo "     - Contrase√±a: Test123!@#"
echo "  4. Verificar:"
echo "     ‚úì Se redirige a Home despu√©s de register"
echo "     ‚úì Token guardado en localStorage (ver DevTools)"
echo "     ‚úì Mostrar 'Mis Documentos' y conexi√≥n WebSocket"
echo ""
echo "  5. Logout y probar login con el mismo usuario"
echo "  6. Verificar:"
echo "     ‚úì Login redirige a Home"
echo "     ‚úì Token se actualiza"
echo "     ‚úì WebSocket reconecta"
echo ""

echo "üì§ BLOQUE 2: UPLOAD & LISTADO"
echo "  1. En Home, subir un PDF de prueba"
echo "     - O una imagen cualquiera (JPG/PNG)"
echo "  2. Verificar:"
echo "     ‚úì Se muestra el archivo en la lista"
echo "     ‚úì Aparece el bot√≥n 'Procesar con IA'"
echo "     ‚úì Tama√±o y fecha mostrados correctamente"
echo ""
echo "  3. Subir otro archivo para testear m√∫ltiples"
echo "  4. Verificar:"
echo "     ‚úì Se ordena por m√°s reciente"
echo "     ‚úì Listado paginado correcto"
echo ""

echo "ü§ñ BLOQUE 3: OCR & WEBSOCKET"
echo "  1. Click 'Procesar con IA' en un documento"
echo "  2. Verificar:"
echo "     ‚úì Bot√≥n cambia a 'Procesando...' con loader"
echo "     ‚úì WebSocket status muestra 'üü¢ Conectado'"
echo "     ‚úì Notificaci√≥n en tiempo real llega"
echo ""
echo "  3. Esperar a que finalice OCR"
echo "  4. Verificar:"
echo "     ‚úì Bot√≥n cambia a '‚úì Completado' (badge verde)"
echo "     ‚úì Componente OCRResults aparece debajo"
echo "     ‚úì Muestra: confianza, idioma, timestamp"
echo ""

echo "üìã BLOQUE 4: RESULTADOS & UI"
echo "  1. En el componente OCRResults:"
echo "  2. Click 'Copiar Texto'"
echo "     ‚úì Mensaje 'Copiado!' aparece"
echo "     ‚úì Pegar en otra app (Notepad) y verifica texto"
echo ""
echo "  3. Click 'Descargar'"
echo "     ‚úì Se descarga archivo .txt"
echo "     ‚úì Nombre: documento_ocr.txt"
echo ""
echo "  4. Verificar UI completa:"
echo "     ‚úì Responsive en mobile (abrir DevTools F12)"
echo "     ‚úì Colores y estilos correctos"
echo "     ‚úì Sin errores en console (DevTools)"
echo ""

echo "========================================="
echo "‚úÖ CUANDO TODO EST√â OK:"
echo "========================================="
echo ""
echo "1. Mergear develop a main (local, sin CI/CD):"
echo "   git checkout main"
echo "   git merge develop"
echo ""
echo "2. OPCI√ìN A: Push a GitHub (gastar√° minutos CI/CD)"
echo "   git push origin main"
echo ""
echo "2. OPCI√ìN B: Mantener sin push para ahorrar CI/CD"
echo "   (Guardar trabajo local, push despu√©s)"
echo ""
